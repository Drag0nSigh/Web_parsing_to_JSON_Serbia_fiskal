# üß™ –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é –ø—Ä–æ–µ–∫—Ç–∞ Web_parsing_to_JSON_Serbia_fiskal

–ü–æ–ª–Ω—ã–π –Ω–∞–±–æ—Ä —Ç–µ—Å—Ç–æ–≤ –¥–ª—è –ø—Ä–æ–µ–∫—Ç–∞ –ø–∞—Ä—Å–∏–Ω–≥–∞ —Å–µ—Ä–±—Å–∫–∏—Ö —Ñ–∏—Å–∫–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º pytest.

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ç–µ—Å—Ç–æ–≤

```
tests/
‚îú‚îÄ‚îÄ __init__.py                 # –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø–∞–∫–µ—Ç–∞ —Ç–µ—Å—Ç–æ–≤
‚îú‚îÄ‚îÄ conftest.py                 # –û–±—â–∏–µ —Ñ–∏–∫—Å—Ç—É—Ä—ã –∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
‚îú‚îÄ‚îÄ requirements-test.txt       # –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
‚îú‚îÄ‚îÄ test_models.py             # –¢–µ—Å—Ç—ã Pydantic –º–æ–¥–µ–ª–µ–π
‚îú‚îÄ‚îÄ test_db_utils.py           # –¢–µ—Å—Ç—ã —Ñ—É–Ω–∫—Ü–∏–π –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
‚îú‚îÄ‚îÄ test_parser.py             # –¢–µ—Å—Ç—ã –ø–∞—Ä—Å–µ—Ä–∞
‚îú‚îÄ‚îÄ test_bot_commands.py       # –¢–µ—Å—Ç—ã –∫–æ–º–∞–Ω–¥ –±–æ—Ç–∞
‚îú‚îÄ‚îÄ test_log_manager.py        # –¢–µ—Å—Ç—ã –º–µ–Ω–µ–¥–∂–µ—Ä–∞ –ª–æ–≥–æ–≤
‚îú‚îÄ‚îÄ test_integration.py        # –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã
‚îú‚îÄ‚îÄ test_admin_commands.py     # –¢–µ—Å—Ç—ã –∞–¥–º–∏–Ω—Å–∫–∏—Ö –∫–æ–º–∞–Ω–¥
‚îú‚îÄ‚îÄ test_user_commands.py      # –¢–µ—Å—Ç—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö –∫–æ–º–∞–Ω–¥
‚îú‚îÄ‚îÄ test_telegram_bot.py       # –¢–µ—Å—Ç—ã Telegram –±–æ—Ç–∞
‚îî‚îÄ‚îÄ TESTING_GUIDE.md          # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è —Ç–µ—Å—Ç–æ–≤
```

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
```bash
# –û—Å–Ω–æ–≤–Ω—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –ø—Ä–æ–µ–∫—Ç–∞
pip install -r requirements.txt

# –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
pip install -r tests/requirements-test.txt

# –ò–ª–∏ —á–µ—Ä–µ–∑ make
make install-test
```

### –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤
```bash
# –í—Å–µ —Ç–µ—Å—Ç—ã
pytest

# –¢–æ–ª—å–∫–æ –±—ã—Å—Ç—Ä—ã–µ —Ç–µ—Å—Ç—ã
pytest -m "not slow"

# –° –ø–æ–∫—Ä—ã—Ç–∏–µ–º –∫–æ–¥–∞
pytest --cov=src --cov-report=html

# –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ
pytest -n auto

# –ß–µ—Ä–µ–∑ make
make test-fast
make test-coverage
make test-parallel
```

## üìä –ö–∞—Ç–µ–≥–æ—Ä–∏–∏ —Ç–µ—Å—Ç–æ–≤

### üîß Unit —Ç–µ—Å—Ç—ã
–¢–µ—Å—Ç–∏—Ä—É—é—Ç –æ—Ç–¥–µ–ª—å–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –≤ –∏–∑–æ–ª—è—Ü–∏–∏:

```bash
# –¢–µ—Å—Ç—ã –º–æ–¥–µ–ª–µ–π
pytest tests/test_models.py -v

# –¢–µ—Å—Ç—ã –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
pytest tests/test_db_utils.py -v

# –¢–µ—Å—Ç—ã –ø–∞—Ä—Å–µ—Ä–∞
pytest tests/test_parser.py -v

# –¢–µ—Å—Ç—ã –ª–æ–≥–≥–µ—Ä–∞
pytest tests/test_log_manager.py -v
```

### üåê Integration —Ç–µ—Å—Ç—ã
–¢–µ—Å—Ç–∏—Ä—É—é—Ç –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤:

```bash
# –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã
pytest tests/test_integration.py -v

# –¢–µ—Å—Ç—ã —Å –º–∞—Ä–∫–µ—Ä–æ–º integration
pytest -m integration
```

### ü§ñ Bot —Ç–µ—Å—Ç—ã
–¢–µ—Å—Ç–∏—Ä—É—é—Ç —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å Telegram –±–æ—Ç–∞:

```bash
# –¢–µ—Å—Ç—ã –∫–æ–º–∞–Ω–¥ –±–æ—Ç–∞
pytest tests/test_bot_commands.py -v

# –¢–µ—Å—Ç—ã –∞–¥–º–∏–Ω—Å–∫–∏—Ö –∫–æ–º–∞–Ω–¥
pytest tests/test_admin_commands.py -v

# –¢–µ—Å—Ç—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö –∫–æ–º–∞–Ω–¥
pytest tests/test_user_commands.py -v

# –¢–µ—Å—Ç—ã Telegram –±–æ—Ç–∞
pytest tests/test_telegram_bot.py -v
```

### üêå Slow —Ç–µ—Å—Ç—ã
–ú–µ–¥–ª–µ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã (–ø–∞—Ä—Å–∏–Ω–≥, –±–æ–ª—å—à–∏–µ –¥–∞–Ω–Ω—ã–µ):

```bash
# –¢–æ–ª—å–∫–æ –º–µ–¥–ª–µ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã
pytest -m slow

# –ò—Å–∫–ª—é—á–∏—Ç—å –º–µ–¥–ª–µ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã
pytest -m "not slow"
```

## üõ†Ô∏è –§–∏–∫—Å—Ç—É—Ä—ã –∏ –º–æ–∫–∏

### –û—Å–Ω–æ–≤–Ω—ã–µ —Ñ–∏–∫—Å—Ç—É—Ä—ã (conftest.py)

- `temp_log_dir` - –í—Ä–µ–º–µ–Ω–Ω–∞—è –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è –¥–ª—è –ª–æ–≥–æ–≤
- `mock_log_manager` - –ú–æ–∫ –º–µ–Ω–µ–¥–∂–µ—Ä–∞ –ª–æ–≥–æ–≤
- `mock_database` - –ú–æ–∫ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
- `sample_serbian_data` - –û–±—Ä–∞–∑–µ—Ü —Å–µ—Ä–±—Å–∫–∏—Ö –¥–∞–Ω–Ω—ã—Ö
- `sample_russian_data` - –û–±—Ä–∞–∑–µ—Ü —Ä–æ—Å—Å–∏–π—Å–∫–∏—Ö –¥–∞–Ω–Ω—ã—Ö
- `mock_selenium_driver` - –ú–æ–∫ Selenium WebDriver
- `mock_telegram_update` - –ú–æ–∫ Telegram Update
- `mock_telegram_context` - –ú–æ–∫ Telegram Context

### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ñ–∏–∫—Å—Ç—É—Ä

```python
def test_example(temp_log_dir, mock_database):
    """–¢–µ—Å—Ç —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º —Ñ–∏–∫—Å—Ç—É—Ä."""
    # temp_log_dir —Å–æ–¥–µ—Ä–∂–∏—Ç Path –∫ –≤—Ä–µ–º–µ–Ω–Ω–æ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏
    # mock_database —Å–æ–¥–µ—Ä–∂–∏—Ç –º–æ–∫ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
    pass
```

## üìã –ú–∞—Ä–∫–µ—Ä—ã —Ç–µ—Å—Ç–æ–≤

### –î–æ—Å—Ç—É–ø–Ω—ã–µ –º–∞—Ä–∫–µ—Ä—ã

- `@pytest.mark.slow` - –ú–µ–¥–ª–µ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã
- `@pytest.mark.integration` - –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã
- `@pytest.mark.unit` - Unit —Ç–µ—Å—Ç—ã
- `@pytest.mark.selenium` - –¢–µ—Å—Ç—ã —Å Selenium
- `@pytest.mark.database` - –¢–µ—Å—Ç—ã —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö
- `@pytest.mark.async` - –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã

### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –º–∞—Ä–∫–µ—Ä–æ–≤

```python
@pytest.mark.slow
@pytest.mark.selenium
def test_complex_parsing():
    """–ú–µ–¥–ª–µ–Ω–Ω—ã–π —Ç–µ—Å—Ç —Å Selenium."""
    pass
```

## üìà –ü–æ–∫—Ä—ã—Ç–∏–µ –∫–æ–¥–∞

### –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –æ—Ç—á–µ—Ç–æ–≤

```bash
# HTML –æ—Ç—á–µ—Ç
pytest --cov=src --cov-report=html

# –¢–µ—Ä–º–∏–Ω–∞–ª—å–Ω—ã–π –æ—Ç—á–µ—Ç
pytest --cov=src --cov-report=term-missing

# XML –æ—Ç—á–µ—Ç (–¥–ª—è CI/CD)
pytest --cov=src --cov-report=xml

# –ß–µ—Ä–µ–∑ make
make test-coverage
```

### –¶–µ–ª–∏ –ø–æ–∫—Ä—ã—Ç–∏—è

- **–ú–∏–Ω–∏–º–∞–ª—å–Ω–æ–µ –ø–æ–∫—Ä—ã—Ç–∏–µ**: 80%
- **–ñ–µ–ª–∞—Ç–µ–ª—å–Ω–æ–µ –ø–æ–∫—Ä—ã—Ç–∏–µ**: 90%+
- **–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –º–æ–¥—É–ª–∏**: 95%+

### –ò—Å–∫–ª—é—á–µ–Ω–∏—è –∏–∑ –ø–æ–∫—Ä—ã—Ç–∏—è

- –¢–æ—á–∫–∏ –≤—Ö–æ–¥–∞ (`main.py`, `start_bot.py`)
- –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã
- –ú–∏–≥—Ä–∞—Ü–∏–∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
- –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∫–æ–¥

## üîç –¢–∏–ø—ã —Ç–µ—Å—Ç–æ–≤ –ø–æ –º–æ–¥—É–ª—è–º

### test_models.py
- ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è Pydantic –º–æ–¥–µ–ª–µ–π
- ‚úÖ –ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö Serbian ‚Üí Russian
- ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ edge cases
- ‚úÖ –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —É–Ω–∏–∫–∞–ª—å–Ω—ã—Ö ID
- ‚úÖ –†–∞—Å—á–µ—Ç –ù–î–°

### test_db_utils.py
- ‚úÖ CRUD –æ–ø–µ—Ä–∞—Ü–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- ‚úÖ –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–ø—Ä–æ—Å–æ–≤
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–∏–º–∏—Ç–æ–≤
- ‚úÖ –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

### test_parser.py
- ‚úÖ –ü–∞—Ä—Å–∏–Ω–≥ —Å–µ—Ä–±—Å–∫–∏—Ö —á–∏—Å–µ–ª
- ‚úÖ –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ Knockout.js –¥–∞–Ω–Ω—ã—Ö
- ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ HTML
- ‚úÖ Selenium WebDriver —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ
- ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –ø–∞—Ä—Å–∏–Ω–≥–∞

### test_bot_commands.py
- ‚úÖ –ê–¥–º–∏–Ω—Å–∫–∏–µ –∫–æ–º–∞–Ω–¥—ã
- ‚úÖ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ –∫–æ–º–∞–Ω–¥—ã
- ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π
- ‚úÖ –ê–∫—Ç–∏–≤–∞—Ü–∏—è/–¥–µ–∞–∫—Ç–∏–≤–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- ‚úÖ Telegram API –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ

### test_log_manager.py
- ‚úÖ –ï–∂–µ–¥–Ω–µ–≤–Ω—ã–µ –ª–æ–≥ —Ñ–∞–π–ª—ã
- ‚úÖ –û—á–∏—Å—Ç–∫–∞ —Å—Ç–∞—Ä—ã—Ö –ª–æ–≥–æ–≤
- ‚úÖ –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø—Ä–∞–≤ –∑–∞–ø–∏—Å–∏
- ‚úÖ –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ª–æ–≥–æ–≤
- ‚úÖ –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ª–æ–≥–≥–µ—Ä–æ–≤

### test_integration.py
- ‚úÖ –ü–æ–ª–Ω—ã–π workflow –ø–∞—Ä—Å–∏–Ω–≥–∞
- ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
- ‚úÖ –†–µ–∞–ª—å–Ω—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
- ‚úÖ –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
- ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

## ‚ö° –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å —Ç–µ—Å—Ç–æ–≤

### –ë—ã—Å—Ç—Ä–æ–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ

```bash
# –¢–æ–ª—å–∫–æ –±—ã—Å—Ç—Ä—ã–µ unit —Ç–µ—Å—Ç—ã
make test-fast

# –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ
make test-parallel

# –û—Å—Ç–∞–Ω–æ–≤–∫–∞ –Ω–∞ –ø–µ—Ä–≤–æ–π –æ—à–∏–±–∫–µ
pytest --maxfail=1
```

### –ü—Ä–æ—Ñ–∏–ª–∏—Ä–æ–≤–∞–Ω–∏–µ

```bash
# –í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —Ç–µ—Å—Ç–æ–≤
pytest --durations=10

# –ü—Ä–æ—Ñ–∏–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–∞–º—è—Ç–∏
pytest --memprof

# –ë–µ–Ω—á–º–∞—Ä–∫–∏
pytest --benchmark-only
```

## üê≥ Docker —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### Docker Compose –¥–ª—è —Ç–µ—Å—Ç–æ–≤

```bash
# –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤ –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ
make docker-test

# –û—á–∏—Å—Ç–∫–∞ –ø–æ—Å–ª–µ —Ç–µ—Å—Ç–æ–≤
make docker-test-clean
```

### –ò–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —Å—Ä–µ–¥–∞

- –û—Ç–¥–µ–ª—å–Ω–∞—è –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –¥–ª—è —Ç–µ—Å—Ç–æ–≤
- –ò–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ª–æ–≥–∏
- –ß–∏—Å—Ç–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –∑–∞–ø—É—Å–∫–∞

## üîß CI/CD –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è

### GitHub Actions –ø—Ä–∏–º–µ—Ä

```yaml
name: Tests
on: [push, pull_request]
jobs:
  test:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
      - uses: actions/setup-python@v4
        with:
          python-version: '3.11'
      - run: make install-test
      - run: make test-coverage
      - run: make lint
```

### –û—Ç—á–µ—Ç—ã –¥–ª—è CI

```bash
# JUnit XML –¥–ª—è Jenkins/GitLab
pytest --junit-xml=tests/reports/junit.xml

# JSON –æ—Ç—á–µ—Ç
pytest --json-report --json-report-file=tests/reports/report.json
```

## üõ°Ô∏è –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å —Ç–µ—Å—Ç–æ–≤

### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ —É—è–∑–≤–∏–º–æ—Å—Ç–µ–π
bandit -r src

# –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –≤ —Ç–µ—Å—Ç–∞—Ö
pytest --security
```

### –ë–µ–∑–æ–ø–∞—Å–Ω—ã–µ —Ç–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ

- –ù–∏–∫–∞–∫–∏—Ö —Ä–µ–∞–ª—å–Ω—ã—Ö —Ç–æ–∫–µ–Ω–æ–≤
- –ú–æ–∫-–¥–∞–Ω–Ω—ã–µ –¥–ª—è –≤—Å–µ—Ö –≤–Ω–µ—à–Ω–∏—Ö API
- –ò–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —Ç–µ—Å—Ç–æ–≤–∞—è –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö

## üìù –ù–∞–ø–∏—Å–∞–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤

### –õ—É—á—à–∏–µ –ø—Ä–∞–∫—Ç–∏–∫–∏

1. **–ò–º–µ–Ω–æ–≤–∞–Ω–∏–µ**: `test_function_name_scenario`
2. **–°—Ç—Ä—É–∫—Ç—É—Ä–∞**: Arrange ‚Üí Act ‚Üí Assert
3. **–ù–µ–∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å**: –ö–∞–∂–¥—ã–π —Ç–µ—Å—Ç –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω
4. **–ß–∏—Ç–∞–µ–º–æ—Å—Ç—å**: –ü–æ–Ω—è—Ç–Ω—ã–µ –Ω–∞–∑–≤–∞–Ω–∏—è –∏ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏

### –®–∞–±–ª–æ–Ω —Ç–µ—Å—Ç–∞

```python
def test_function_name_success_scenario(fixture1, fixture2):
    """–¢–µ—Å—Ç function_name —Å —É—Å–ø–µ—à–Ω—ã–º —Å—Ü–µ–Ω–∞—Ä–∏–µ–º."""
    # Arrange
    input_data = "test input"
    expected_result = "expected output"
    
    # Act
    result = function_name(input_data)
    
    # Assert
    assert result == expected_result
```

### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏—Å–∫–ª—é—á–µ–Ω–∏–π

```python
def test_function_raises_exception():
    """–¢–µ—Å—Ç —á—Ç–æ —Ñ—É–Ω–∫—Ü–∏—è –≤—ã–∑—ã–≤–∞–µ—Ç —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–µ–µ –∏—Å–∫–ª—é—á–µ–Ω–∏–µ."""
    with pytest.raises(ValueError, match="Invalid input"):
        function_name("invalid_input")
```

### Async —Ç–µ—Å—Ç—ã

```python
@pytest.mark.asyncio
async def test_async_function():
    """–¢–µ—Å—Ç –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–∏."""
    result = await async_function()
    assert result is not None
```

## üéØ –¶–µ–ª–∏ –∫–∞—á–µ—Å—Ç–≤–∞

### –ú–µ—Ç—Ä–∏–∫–∏ –∫–∞—á–µ—Å—Ç–≤–∞

- **–ü–æ–∫—Ä—ã—Ç–∏–µ –∫–æ–¥–∞**: ‚â•80%
- **–£—Å–ø–µ—à–Ω–æ—Å—Ç—å —Ç–µ—Å—Ç–æ–≤**: 100%
- **–í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è**: <5 –º–∏–Ω—É—Ç –¥–ª—è –≤—Å–µ—Ö —Ç–µ—Å—Ç–æ–≤
- **–°—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å**: –ù–µ—Ç flaky —Ç–µ—Å—Ç–æ–≤

### –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∫–∞—á–µ—Å—Ç–≤–∞

```bash
# –û—Ç—á–µ—Ç –æ –ø–æ–∫—Ä—ã—Ç–∏–∏
make test-coverage

# –û—Ç—á–µ—Ç –æ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
make test-benchmark

# –û—Ç—á–µ—Ç –æ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
make test-security
```

## üîç Debugging —Ç–µ—Å—Ç–æ–≤

### –û—Ç–ª–∞–¥–∫–∞ —É–ø–∞–≤—à–∏—Ö —Ç–µ—Å—Ç–æ–≤

```bash
# –ü–æ–¥—Ä–æ–±–Ω—ã–π –≤—ã–≤–æ–¥ –æ—à–∏–±–æ–∫
pytest --tb=long

# –û—Å—Ç–∞–Ω–æ–≤–∫–∞ –Ω–∞ –ø–µ—Ä–≤–æ–π –æ—à–∏–±–∫–µ
pytest -x

# –ó–∞–ø—É—Å–∫ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —Ç–µ—Å—Ç–∞
pytest tests/test_models.py::TestSerbianItem::test_valid_item_creation -v
```

### –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ —Ç–µ—Å—Ç–∞—Ö

```bash
# –í–∫–ª—é—á–∏—Ç—å –ª–æ–≥–∏ –≤–æ –≤—Ä–µ–º—è —Ç–µ—Å—Ç–æ–≤
pytest --log-cli-level=DEBUG

# –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –ª–æ–≥–∏ –≤ —Ñ–∞–π–ª
pytest --log-file=tests/debug.log
```

## üö® Troubleshooting

### –ü—Ä–æ–±–ª–µ–º–∞: ImportError
**–†–µ—à–µ–Ω–∏–µ:** –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ src/ –≤ PYTHONPATH
```bash
export PYTHONPATH="${PYTHONPATH}:src"
# –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ conftest.py (—É–∂–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ)
```

### –ü—Ä–æ–±–ª–µ–º–∞: ValidationError –≤ —Ç–µ—Å—Ç–∞—Ö –º–æ–¥–µ–ª–µ–π
**–†–µ—à–µ–Ω–∏–µ:** –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è –º–æ–¥–µ–ª–∏
```python
# –ü–æ—Å–º–æ—Ç—Ä–∏—Ç–µ –≤—Å–µ –ø–æ–ª—è SerbianFiscalData
from models.fiscal_models import SerbianFiscalData
print(SerbianFiscalData.model_fields.keys())
```

### –ü—Ä–æ–±–ª–µ–º–∞: –¢–µ—Å—Ç—ã —Ä–∞–±–æ—Ç–∞—é—Ç –ª–æ–∫–∞–ª—å–Ω–æ, –Ω–æ –Ω–µ –≤ CI
**–†–µ—à–µ–Ω–∏–µ:** –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –∏ –≤–µ—Ä—Å–∏–∏ Python

## üìö –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã

- [Pytest –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è](https://docs.pytest.org/)
- [Coverage.py –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è](https://coverage.readthedocs.io/)
- [Pytest-asyncio](https://pytest-asyncio.readthedocs.io/)
- [Factory Boy](https://factoryboy.readthedocs.io/)
- [Pydantic](https://docs.pydantic.dev/) - –≤–∞–ª–∏–¥–∞—Ü–∏—è –º–æ–¥–µ–ª–µ–π

## ü§ù –£—á–∞—Å—Ç–∏–µ –≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö —Ç–µ—Å—Ç–æ–≤

1. –°–æ–∑–¥–∞–π—Ç–µ —Ç–µ—Å—Ç –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–µ–º —Ñ–∞–π–ª–µ
2. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ —Ñ–∏–∫—Å—Ç—É—Ä—ã
3. –î–æ–±–∞–≤—å—Ç–µ –º–∞—Ä–∫–µ—Ä—ã –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏
4. –û–±–Ω–æ–≤–∏—Ç–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é

### –°—Ç–∞–Ω–¥–∞—Ä—Ç—ã –∫–∞—á–µ—Å—Ç–≤–∞

- –í—Å–µ –Ω–æ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –¥–æ–ª–∂–Ω—ã –∏–º–µ—Ç—å —Ç–µ—Å—Ç—ã
- –ü–æ–∫—Ä—ã—Ç–∏–µ –Ω–æ–≤—ã—Ö –º–æ–¥—É–ª–µ–π ‚â•90%
- –¢–µ—Å—Ç—ã –¥–æ–ª–∂–Ω—ã –ø—Ä–æ—Ö–æ–¥–∏—Ç—å –Ω–∞ –≤—Å–µ—Ö –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã—Ö –≤–µ—Ä—Å–∏—è—Ö Python
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ç–∏–ø–∏–∑–∞—Ü–∏–∏ –≤ —Ç–µ—Å—Ç–∞—Ö –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤—É–µ—Ç—Å—è

## üéØ Roadmap

- [ ] –î–æ–±–∞–≤–∏—Ç—å property-based —Ç–µ—Å—Ç—ã (Hypothesis)
- [ ] –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã —Å —Ä–µ–∞–ª—å–Ω–æ–π –ë–î
- [ ] Performance —Ç–µ—Å—Ç—ã  
- [ ] Smoke —Ç–µ—Å—Ç—ã –¥–ª—è CI/CD
- [ ] Mutation —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

## üîß –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### pytest.ini
```ini
[tool:pytest]
testpaths = tests
addopts = --verbose --tb=short --color=yes
markers =
    slow: –º–µ–¥–ª–µ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã
    integration: –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã
    unit: unit —Ç–µ—Å—Ç—ã
    selenium: —Ç–µ—Å—Ç—ã —Å Selenium
    database: —Ç–µ—Å—Ç—ã —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö
    async: –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã
```

### .coveragerc
```ini
[run]
source = src
branch = True
fail_under = 80

[report]
exclude_lines =
    pragma: no cover
    def __repr__
    if self.debug:
    if settings.DEBUG
    raise AssertionError
    raise NotImplementedError
    if 0:
    if __name__ == .__main__.:
    class .*\bProtocol\):
    @(abc\.)?abstractmethod
```