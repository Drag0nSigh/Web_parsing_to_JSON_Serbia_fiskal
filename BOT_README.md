# ü§ñ –¢–µ–ª–µ–≥—Ä–∞–º –ë–æ—Ç –¥–ª—è –ü–∞—Ä—Å–∏–Ω–≥–∞ –§–∏—Å–∫–∞–ª—å–Ω—ã—Ö –î–∞–Ω–Ω—ã—Ö

## üìã –û–ø–∏—Å–∞–Ω–∏–µ

–¢–µ–ª–µ–≥—Ä–∞–º –±–æ—Ç –¥–ª—è –ø–∞—Ä—Å–∏–Ω–≥–∞ —Å–µ—Ä–±—Å–∫–∏—Ö —Ñ–∏—Å–∫–∞–ª—å–Ω—ã—Ö —á–µ–∫–æ–≤ –∏ –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏ –∏—Ö –≤ —Ä–æ—Å—Å–∏–π—Å–∫–∏–π JSON —Ñ–æ—Ä–º–∞—Ç.

## üöÄ –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –ó–∞–ø—É—Å–∫

### 1. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
```bash
venv\Scripts\pip install -r requirements.txt
```

### 2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è
–í —Ñ–∞–π–ª–µ `env` –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å —É–∫–∞–∑–∞–Ω—ã:
```
TG_TOKEN = –≤–∞—à_—Ç–æ–∫–µ–Ω_–±–æ—Ç–∞
TG_ID = –≤–∞—à_telegram_id
```

### 3. –ó–∞–ø—É—Å–∫ –±–æ—Ç–∞
```bash
# –í–∞—Ä–∏–∞–Ω—Ç 1: –ü—Ä—è–º–æ–π –∑–∞–ø—É—Å–∫
venv\Scripts\python.exe telegram_bot.py

# –í–∞—Ä–∏–∞–Ω—Ç 2: –ß–µ—Ä–µ–∑ —Å–∫—Ä–∏–ø—Ç –∑–∞–ø—É—Å–∫–∞
venv\Scripts\python.exe start_bot.py
```

## üîß –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å

### ‚úÖ –ß—Ç–æ —É–º–µ–µ—Ç –±–æ—Ç:
- **–ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Å—ã–ª–æ–∫**: –ü—Ä–∏–Ω–∏–º–∞–µ—Ç —Ç–æ–ª—å–∫–æ –≤–∞–ª–∏–¥–Ω—ã–µ URL
- **–ü–∞—Ä—Å–∏–Ω–≥ –¥–∞–Ω–Ω—ã—Ö**: –ò—Å–ø–æ–ª—å–∑—É–µ—Ç Selenium –¥–ª—è –∏–∑–≤–ª–µ—á–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö —Å —Å–∞–π—Ç–∞
- **–ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è**: –ü—Ä–µ–æ–±—Ä–∞–∑—É–µ—Ç —Å–µ—Ä–±—Å–∫–∏–µ –¥–∞–Ω–Ω—ã–µ –≤ —Ä–æ—Å—Å–∏–π—Å–∫–∏–π —Ñ–æ—Ä–º–∞—Ç
- **–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –ª–æ–≥–æ–≤**: –ö–∞–∂–¥—ã–π JSON —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ –ø–∞–ø–∫—É `log/` —Å –≤—Ä–µ–º–µ–Ω–Ω–æ–π –º–µ—Ç–∫–æ–π
- **–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –¥–æ—Å—Ç—É–ø–∞**: –†–∞–±–æ—Ç–∞–µ—Ç —Ç–æ–ª—å–∫–æ —Å –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–º–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏

### üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤ –ª–æ–≥–æ–≤:
```
log/
‚îú‚îÄ‚îÄ fiscal_data_250925_14:58:30.json
‚îú‚îÄ‚îÄ fiscal_data_250925_15:02:15.json
‚îî‚îÄ‚îÄ ...
```

## üí¨ –ö–æ–º–∞–Ω–¥—ã –±–æ—Ç–∞

### `/start`
- –ü—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ –∏ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

### –û—Ç–ø—Ä–∞–≤–∫–∞ —Å—Å—ã–ª–∫–∏
- –û—Ç–ø—Ä–∞–≤—å—Ç–µ —Å—Å—ã–ª–∫—É –Ω–∞ —Å–µ—Ä–±—Å–∫–∏–π —Ñ–∏—Å–∫–∞–ª—å–Ω—ã–π —á–µ–∫
- –ë–æ—Ç –ø—Ä–æ–≤–µ—Ä–∏—Ç –≤–∞–ª–∏–¥–Ω–æ—Å—Ç—å —Å—Å—ã–ª–∫–∏
- –í—ã–ø–æ–ª–Ω–∏—Ç –ø–∞—Ä—Å–∏–Ω–≥ –∏ –≤–µ—Ä–Ω–µ—Ç JSON

## üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

- –ë–æ—Ç —Ä–∞–±–æ—Ç–∞–µ—Ç —Ç–æ–ª—å–∫–æ —Å –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–º–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏ (ID —É–∫–∞–∑–∞–Ω –≤ `env`)
- –í—Å–µ –∑–∞–ø—Ä–æ—Å—ã –ª–æ–≥–∏—Ä—É—é—Ç—Å—è
- JSON —Ñ–∞–π–ª—ã —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –ª–æ–∫–∞–ª—å–Ω–æ

## üìä –§–æ—Ä–º–∞—Ç –æ—Ç–≤–µ—Ç–∞

–ë–æ—Ç –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç JSON –≤ —Ñ–æ—Ä–º–∞—Ç–µ:
```json
[
  {
    "_id": "—É–Ω–∏–∫–∞–ª—å–Ω—ã–π_id",
    "createdAt": "2025-08-27T20:02:34+00:00",
    "ticket": {
      "document": {
        "receipt": {
          "cashTotalSum": 0,
          "code": 3,
          "creditSum": 0,
          "dateTime": "2025-08-27T20:02:34",
          "ecashTotalSum": 183996,
          "fiscalDocumentFormatVer": 4,
          "fiscalDocumentNumber": 88856,
          "fiscalDriveNumber": "0000000000000000",
          "fiscalSign": 87369,
          "fnsUrl": "www.nalog.gov.rs",
          "items": [...],
          "kktRegId": "106884584",
          "nds0": 0,
          "amountsReceiptNds": {
            "amountsNds": [
              {
                "nds": 2,
                "ndsSum": 17597
              }
            ]
          },
          "operationType": 1,
          "operator": null,
          "prepaidSum": 0,
          "provisionSum": 0,
          "requestNumber": null,
          "retailPlace": "1228831-Prodavnica br. 0156",
          "retailPlaceAddress": "–ë–£–õ–ï–í–ê–† –î–ï–°–ü–û–¢–ê –°–¢–ï–§–ê–ù–ê 99, –ë–ï–û–ì–†–ê–î (–ü–ê–õ–ò–õ–£–õ–ê)",
          "shiftNumber": null,
          "taxationType": 2,
          "appliedTaxationType": 2,
          "totalSum": 183996,
          "user": "1228831-Prodavnica br. 0156",
          "userInn": "106884584"
        }
      }
    }
  }
]
```

## üõ†Ô∏è –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

- **Python 3.8+**
- **python-telegram-bot 20.0+**
- **Selenium** –¥–ª—è –ø–∞—Ä—Å–∏–Ω–≥–∞
- **Pydantic** –¥–ª—è –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –¥–∞–Ω–Ω—ã—Ö
- **BeautifulSoup** –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ HTML

## üìù –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

–í—Å–µ –¥–µ–π—Å—Ç–≤–∏—è –±–æ—Ç–∞ –ª–æ–≥–∏—Ä—É—é—Ç—Å—è:
- –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏–π
- –û—à–∏–±–∫–∏ –ø–∞—Ä—Å–∏–Ω–≥–∞
- –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ñ–∞–π–ª–æ–≤
- –û—à–∏–±–∫–∏ –¥–æ—Å—Ç—É–ø–∞

## üîß –ù–∞—Å—Ç—Ä–æ–π–∫–∞

### –ò–∑–º–µ–Ω–µ–Ω–∏–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π –¥–æ—Å—Ç—É–ø–∞:
–í —Ñ–∞–π–ª–µ `telegram_bot.py` –∏–∑–º–µ–Ω–∏—Ç–µ:
```python
ALLOWED_USER_ID = int(os.getenv('TG_ID', '0'))
```

### –ò–∑–º–µ–Ω–µ–Ω–∏–µ –ø–∞–ø–∫–∏ –ª–æ–≥–æ–≤:
–í —Ñ–∞–π–ª–µ `telegram_bot.py` –∏–∑–º–µ–Ω–∏—Ç–µ:
```python
log_dir = Path("log")  # –ó–∞–º–µ–Ω–∏—Ç–µ –Ω–∞ –Ω—É–∂–Ω—É—é –ø–∞–ø–∫—É
```

## ‚ùó –í–∞–∂–Ω—ã–µ –∑–∞–º–µ—á–∞–Ω–∏—è

1. **–¢–æ–∫–µ–Ω –±–æ—Ç–∞**: –ü–æ–ª—É—á–∏—Ç–µ —É @BotFather –≤ Telegram
2. **ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è**: –£–∑–Ω–∞–π—Ç–µ —É @userinfobot
3. **Selenium**: –¢—Ä–µ–±—É–µ—Ç Chrome/Chromium –±—Ä–∞—É–∑–µ—Ä
4. **–ü—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞**: –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —É –±–æ—Ç–∞ –µ—Å—Ç—å –ø—Ä–∞–≤–∞ –Ω–∞ –∑–∞–ø–∏—Å—å –≤ –ø–∞–ø–∫—É `log/`

## üÜò –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ü—Ä–∏ –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏–∏ –ø—Ä–æ–±–ª–µ–º:
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –≤ –∫–æ–Ω—Å–æ–ª–∏
2. –£–±–µ–¥–∏—Ç–µ—Å—å –≤ –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç–∏ —Ç–æ–∫–µ–Ω–∞ –∏ ID
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞
4. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ Chrome —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω
